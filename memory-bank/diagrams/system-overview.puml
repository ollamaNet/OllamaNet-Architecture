@startuml OllamaNet_System_Overview
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title OllamaNet System Architecture Overview

Person(user, "End User", "User of the OllamaNet platform")
Person(admin, "Administrator", "Platform administrator")

System_Boundary(ollamanet, "OllamaNet Platform") {
    Container(gateway, "Gateway Service", ".NET 9.0, Ocelot", "API gateway for routing requests to appropriate services")
    
    Container(auth, "Auth Service", ".NET 9.0, ASP.NET Core", "Handles user authentication, authorization, and profile management")
    
    Container(admin_service, "Admin Service", ".NET 9.0, ASP.NET Core", "Provides administrative capabilities for platform management")
    
    Container(explore, "Explore Service", ".NET 9.0, ASP.NET Core", "Enables discovery and browsing of available AI models")
    
    Container(conversation, "Conversation Service", ".NET 9.0, ASP.NET Core", "Manages conversations and chat interactions")
    
    ContainerDb(sql_db, "SQL Server", "SQL Server", "Persistent storage for all service data")
    
    ContainerDb(redis, "Redis Cache", "Redis", "Distributed caching for performance optimization")
    
    ContainerDb(vector_db, "Vector Database", "Pinecone", "Vector storage for semantic search")
}

System_Ext(inference_engine, "inference engine API", "External LLM inference engine")
System_Ext(frontend, "Frontend Application", "Web UI consuming the OllamaNet APIs")

Rel(user, frontend, "Uses", "HTTPS")
Rel(admin, frontend, "Administers", "HTTPS")

Rel(frontend, gateway, "Makes API calls to", "HTTPS")

Rel(gateway, auth, "Routes authentication requests to", "HTTP")
Rel(gateway, admin_service, "Routes administration requests to", "HTTP")
Rel(gateway, explore, "Routes exploration requests to", "HTTP")
Rel(gateway, conversation, "Routes conversation requests to", "HTTP")

Rel(auth, sql_db, "Reads from and writes to", "Entity Framework Core")
Rel(admin_service, sql_db, "Reads from and writes to", "Entity Framework Core")
Rel(explore, sql_db, "Reads from and writes to", "Entity Framework Core")
Rel(conversation, sql_db, "Reads from and writes to", "Entity Framework Core")

Rel(auth, redis, "Caches data in", "StackExchange.Redis")
Rel(admin_service, redis, "Caches data in", "StackExchange.Redis")
Rel(explore, redis, "Caches data in", "StackExchange.Redis")
Rel(conversation, redis, "Caches data in", "StackExchange.Redis")

Rel(conversation, vector_db, "Stores and retrieves vectors from", "HTTP")
Rel(admin_service, inference_engine, "Manages models via", "HTTP")
Rel(conversation, inference_engine, "Sends chat requests to", "HTTP")

@enduml 