@startuml Deployment Diagram

node "Kubernetes Cluster" {
  node "API Gateway Pod" {
    [API Gateway] as Gateway
  }
  
  node "ConversationService Pod" {
    [ConversationService] as Service
    [CacheManager] as Cache
  }
  
  node "Database Pod" {
    database "SQL Server" as SQL
  }
  
  node "Redis Cluster" {
    database "Redis Cache" as Redis
  }
  
  node "Ollama Service Pod" {
    [Ollama Service] as Ollama
  }
}

' Internal Communication
Service --> Cache : Local Cache
Cache --> Redis : Distributed Cache
Service --> SQL : Data Access
Service --> Ollama : Model Inference

' External Communication
Gateway --> Service : HTTP Requests

note right of Service
  Deployment Configuration:
  - Replicas: 3
  - Resources: 2CPU, 4GB RAM
  - Health Checks: Enabled
  - Auto-scaling: Enabled
end note

note right of Redis
  Redis Configuration:
  - Cluster Mode: Enabled
  - Replication: Enabled
  - Persistence: RDB + AOF
end note

@enduml 